<!DOCTYPE html>
<head> 
<meta charset='utf-8'> 
<title>Alf - Guided tour</title> 
<!--[if lt IE 9]>
<script src='http://html5shim.googlecode.com/svn/trunk/html5.js'></script>
<![endif]--> 
<!--
<base href="file:///home/blambeau/work/devel/alf/doc/deploy-gh-pages/index.html" />
-->
<base href="http://blambeau.github.com/alf/index.html" />
<!--
<link rel='stylesheet' href='http://fonts.googleapis.com/css?family=Gloria+Hallelujah|Nunito:300' type='text/css'> 
-->
<link rel="stylesheet" href="http://yandex.st/highlightjs/6.0/styles/github.min.css" type='text/css'>
<link href="css/style.css" rel='stylesheet'>
<script type="text/javascript" src="js/jquery-1.6.2.min.js"></script>
<script type="text/javascript" src="http://yandex.st/highlightjs/6.0/highlight.min.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    hljs.initHighlightingOnLoad();
  });
</script>
</head>
<body>
<a href="http://github.com/blambeau/alf"><img style="position: fixed; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a>
<script type="text/javascript">
  var current = "overview";
  function open(entry) {
    hide(current);
    current = entry;
    show(current);
  };
  function show(entry) {
    $('#menu-' + entry + " .content").slideDown(function(){
      window.location = entry + "/index.html";
    });
  };
  function hide(entry) {
    $('#menu-' + entry + " .content").slideUp();
  };
</script>

<div id="menu">

<div class="menu-entry" id="menu-overview">
<div class="head"><a href="javascript:open('overview');">Overview</a></div>
<div class="content" ><ul>
<li><a href="overview/index.html">Home</a></li>
<li><a href="overview/why.html">Why Alf ?</a></li>
<li><a href="overview/guided-tour.html">Guided tour</a></li>
<li><a href="overview/relational-basics.html">Relational basics</a></li>
<li><a href="overview/further-reading.html">Further reading</a></li>
<li><a href="overview/faq.html">FAQ</a></li>
</ul>

</div>
</div>

<div class="menu-entry" id="menu-shell">
<div class="head"><a href="javascript:open('shell');">Alf in Shell</a></div>
<div class="content" style="display:none;"><div class="subentry">Relational operators</div>
<p class="ops"><a href="shell/extend.html">extend</a>, <a href="shell/group.html">group</a>, <a href="shell/intersect.html">intersect</a>, <a href="shell/join.html">join</a>, <a href="shell/matching.html">matching</a>, <a href="shell/minus.html">minus</a>, <a href="shell/not-matching.html">not-matching</a>, <a href="shell/project.html">project</a>, <a href="shell/rank.html">rank</a>, <a href="shell/rename.html">rename</a>, <a href="shell/restrict.html">restrict</a>, <a href="shell/summarize.html">summarize</a>, <a href="shell/ungroup.html">ungroup</a>, <a href="shell/union.html">union</a>, <a href="shell/unwrap.html">unwrap</a>, <a href="shell/wrap.html">wrap</a></p>



<div class="subentry">Experimental operators</div>
<p class="ops"><a href="shell/quota.html">quota</a></p>



<div class="subentry">Non-relational operators</div>
<p class="ops"><a href="shell/autonum.html">autonum</a>, <a href="shell/clip.html">clip</a>, <a href="shell/coerce.html">coerce</a>, <a href="shell/compact.html">compact</a>, <a href="shell/defaults.html">defaults</a>, <a href="shell/generator.html">generator</a>, <a href="shell/sort.html">sort</a></p>



<div class="subentry">Other commands</div>
<p class="ops"><a href="shell/exec.html">exec</a>, <a href="shell/help.html">help</a>, <a href="shell/show.html">show</a></p>



</div>
</div>

<div class="menu-entry" id="menu-ruby">
<div class="head"><a href="javascript:open('ruby');">Alf in Ruby</a></div>
<div class="content" style="display:none;"><div class="subentry">Relational operators</div>
<p class="ops"><a href="ruby/extend.html">extend</a>, <a href="ruby/group.html">group</a>, <a href="ruby/intersect.html">intersect</a>, <a href="ruby/join.html">join</a>, <a href="ruby/matching.html">matching</a>, <a href="ruby/minus.html">minus</a>, <a href="ruby/not-matching.html">not-matching</a>, <a href="ruby/project.html">project</a>, <a href="ruby/rank.html">rank</a>, <a href="ruby/rename.html">rename</a>, <a href="ruby/restrict.html">restrict</a>, <a href="ruby/summarize.html">summarize</a>, <a href="ruby/ungroup.html">ungroup</a>, <a href="ruby/union.html">union</a>, <a href="ruby/unwrap.html">unwrap</a>, <a href="ruby/wrap.html">wrap</a></p>



<div class="subentry">Experimental operators</div>
<p class="ops"><a href="ruby/quota.html">quota</a></p>



<div class="subentry">Non-relational operators</div>
<p class="ops"><a href="ruby/autonum.html">autonum</a>, <a href="ruby/clip.html">clip</a>, <a href="ruby/coerce.html">coerce</a>, <a href="ruby/compact.html">compact</a>, <a href="ruby/defaults.html">defaults</a>, <a href="ruby/generator.html">generator</a>, <a href="ruby/sort.html">sort</a></p>



</div>
</div>

<div class="menu-entry" id="menu-devel">
<div class="head"><a href="javascript:open('devel');">Development</a></div>
<div class="content" style="display:none;"><ul>
<li><a href="devel/contributors.html">Contributors</a></li>
<li><a href="devel/index.html">Contribute</a></li>
<li><a href="devel/licence.html">Licence</a></li>
</ul>

</div>
</div>

</div>



<div id="page">
<h2>Alf &mdash; Guided tour</h2>

<p>Alf is shipped with example relations and is wired to them by default. These relations are based on the popular <em>suppliers-and-parts</em> example that C.J. Date uses in all his books (<em>S</em>, <em>P</em> and <em>SP</em> there are called <code>:suppliers</code>, <code>:parts</code> and <code>:supplies</code> here, respectively). Once Alf is installed, try this:</p>

<pre class="theory"><code class="ruby">$ alf show database
+-------------------------------------+----------------------------------------------+------------------------+
| :suppliers                          | :parts                                       | :supplies              |
+-------------------------------------+----------------------------------------------+------------------------+
| +------+-------+---------+--------+ | +------+-------+--------+---------+--------+ | +------+------+------+ |
| | :sid | :name | :status | :city  | | | :pid | :name | :color | :weight | :city  | | | :sid | :pid | :qty | |
| +------+-------+---------+--------+ | +------+-------+--------+---------+--------+ | +------+------+------+ |
| | S1   | Smith |      20 | London | | | P1   | Nut   | Red    |  12.000 | London | | | S1   | P1   |  300 | |
| | S2   | Jones |      10 | Paris  | | | P2   | Bolt  | Green  |  17.000 | Paris  | | | S1   | P2   |  200 | |
| | S3   | Blake |      30 | Paris  | | | P3   | Screw | Blue   |  17.000 | Oslo   | | | S1   | P3   |  400 | |
| | S4   | Clark |      20 | London | | | P4   | Screw | Red    |  14.000 | London | | | S1   | P4   |  200 | |
| | S5   | Adams |      30 | Athens | | | P5   | Cam   | Blue   |  12.000 | Paris  | | | S1   | P5   |  100 | |
| +------+-------+---------+--------+ | | P6   | Cog   | Red    |  19.000 | London | | | S1   | P6   |  100 | |
|                                     | +------+-------+--------+---------+--------+ | | S2   | P1   |  300 | |
|                                     |                                              | | S2   | P2   |  400 | |
|                                     |                                              | | S3   | P2   |  200 | |
|                                     |                                              | | S4   | P2   |  200 | |
|                                     |                                              | | S4   | P4   |  300 | |
|                                     |                                              | | S4   | P5   |  400 | |
|                                     |                                              | +------+------+------+ |
+-------------------------------------+----------------------------------------------+------------------------+
</code></pre>

<p>What is this? A relation that &quot;contains&quot; other relations; nothing spectacular in the TTM world, even if not usual with SQL. Truly relational approaches (and Alf, by the way) support values of arbitrary complexity. Let me illustrate this with one additional example:</p>

<pre class="theory"><code class="ruby">$ alf --text extend suppliers -- chars "city.chars.to_a"
+------+-------+---------+--------+--------------------+
| :sid | :name | :status | :city  | :chars             |
+------+-------+---------+--------+--------------------+
| S1   | Smith |      20 | London | [L, o, n, d, o, n] |
| S2   | Jones |      10 | Paris  | [P, a, r, i, s]    |
| S3   | Blake |      30 | Paris  | [P, a, r, i, s]    |
| S4   | Clark |      20 | London | [L, o, n, d, o, n] |
| S5   | Adams |      30 | Athens | [A, t, h, e, n, s] |
+------+-------+---------+--------+--------------------+
</code></pre>

<p>All examples in Alf documentation are based on this &quot;database&quot;. Relation names are automatically resolved (as in the example above), so that you can learn quickly and easily. Of course, Alf is not limited to the <em>suppliers-and-parts</em> example. It actually recognizes various sources for base &quot;relations&quot;.</p>

<h3>Manipulating .csv files</h3>

<p>Alf recognizes .csv files as first class citizens. Download <a href="downloads/books.csv">books.csv</a> and save it somewhere (credits to <a href="http://www.parseomatic.com/parse/pskb/CSV-File-Format.htm">parseomatic.com</a>). Then try:</p>

<pre class="theory"><code class="ruby">$ cd somewhere
$ alf show books.csv
+--------------+-----------------------------+------------+--------+
| :review_date | :author                     | :isbn      | :price |
+--------------+-----------------------------+------------+--------+
| 1985/01/21   | Douglas Adams               | 0345391802 | 5.95   |
| 1990/01/12   | Douglas Hofstadter          | 0465026567 | 9.95   |
| 1998/07/15   | Timothy The Parser Campbell | 0968411304 | 18.99  |
| ...          | ...                         | ...        | ...    |
</code></pre>

<p>Oh, of course; .csv files are text files (observe that <code>:price</code> is aligned at left). Let see what we can do here (coercing <code>:review_date</code> to a Time is a bit contrived, but you've got the point!)</p>

<pre class="theory"><code class="ruby">$ alf --text coerce books.csv -- review_date "Time" price "Float"
+---------------------------+-----------------------------+------------+--------+
| :review_date              | :author                     | :isbn      | :price |
+---------------------------+-----------------------------+------------+--------+
| 1985-01-21 00:00:00 +0100 | Douglas Adams               | 0345391802 |  5.950 |
| 1990-01-12 00:00:00 +0100 | Douglas Hofstadter          | 0465026567 |  9.950 |
| 1998-07-15 00:00:00 +0200 | Timothy The Parser Campbell | 0968411304 | 18.990 |
| ...                       | ...                         | ...        | ...    |
</code></pre>

<p>Now that types are properly recognized, you may manipulate your data with the conjoined power of Alf and Ruby: </p>

<pre class="theory"><code class="ruby">$ alf coerce books.csv -- review_date "Time" | alf --text restrict -- "review_date.year == 2004"
+---------------------------+-------------------+------------+--------+
| :review_date              | :author           | :isbn      | :price |
+---------------------------+-------------------+------------+--------+
| 2004-10-04 00:00:00 +0200 | Benjamin Radcliff | 0804818088 |  4.950 |
| 2004-10-04 00:00:00 +0200 | Randel Helms      | 0879755725 |  4.500 |
+---------------------------+-------------------+------------+--------+
</code></pre>

<p>&raquo; Read more about using <a href="shell/index">Alf in Shell</a></p>

<h3>Connecting to SQL sources</h3>

<p>Alf is also able to connect to SQL servers and SQLite files (provided that you install the <code>sequel</code> ruby library, as well as specific adapters: <code>pg</code>, <code>sqlite3</code>, and so on.). For example, suppose that you have a SQLite <code>northwind.db</code> file. Try this:</p>

<pre class="theory"><code class="ruby">$ alf --env=northwind.db --text project customers -- Country
+-------------+
| :Country    |
+-------------+
| Germany     |
| Mexico      |
| UK          |
| Sweden      |
| France      |
| Spain       |
| Canada      |
| ...         |
</code></pre>

<p>In the example above, the returned relation will never contain duplicate country names. Unlike SQL, here, relations are <em>sets</em>, not <em>bags</em>. The <code>project</code> operator automatically removes duplicates. </p>

<p>Now, maybe you use a PostgreSQL database, or MySQL, etc.? No problem! Every DBMS supported by <code>sequel</code>, is supported by Alf (with credits to Jeremy Evans for such awesomeness):</p>

<pre class="theory"><code class="ruby">$ alf --env=postgres://user:password@localhost:port/database --text project customers -- Country
+-------------+
| :Country    |
+-------------+
| Germany     |
| Mexico      |
| ...         |
</code></pre>

</div>


<div id="links">
<a href="http://github.com/blambeau/alf" target="_blank"><img src="images/github-128.png"/></a> 
<a href="http://twitter.com/blambeau" target="_blank"><img src="images/twitter-128.png"/></a> 
</div>
<div id="social">
<a href="http://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="blambeau">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
</div>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-16520635-5']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</body>

