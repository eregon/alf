<!DOCTYPE html>
<head> 
<meta charset='utf-8'> 
<title>One proposal, three flavors</title> 
<!--[if lt IE 9]>
<script src='http://html5shim.googlecode.com/svn/trunk/html5.js'></script>
<![endif]--> 
<link rel="stylesheet" href="http://yandex.st/highlightjs/6.0/styles/github.min.css">
<link href="../css/style.css" rel='stylesheet'>
<script src="http://yandex.st/highlightjs/6.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
<a href="http://github.com/blambeau/alf"><img style="position: fixed; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a>

<div id="menu">


<div class="entry">Overview</div>
<ul>
<li><a href="../overview/index.html">Home</a></li>
<li><a href="../overview/why.html">Why Alf ?</a></li>
<li><a href="../overview/relational-basics.html">Relational basics</a></li>
<li><a href="../overview/one-proposal-three-flavors.html">One proposal, three flavors</a></li>
<li><a href="../overview/alf-in-shell.html">Using Alf in shell</a></li>
<li><a href="../overview/alf-in-ruby.html">Using Alf in Ruby</a></li>
<li><a href="../overview/where-does-alf-come-from.html">Where does Alf come from?</a></li>
</ul>



<div class="entry">Alf in Shell</div>
<div class="subentry">Relational operators</div>
<p class="ops"><a href="../shell/project.html">project</a>, <a href="../shell/extend.html">extend</a>, <a href="../shell/rename.html">rename</a>, <a href="../shell/restrict.html">restrict</a>, <a href="../shell/join.html">join</a>, <a href="../shell/intersect.html">intersect</a>, <a href="../shell/minus.html">minus</a>, <a href="../shell/union.html">union</a>, <a href="../shell/matching.html">matching</a>, <a href="../shell/not-matching.html">not-matching</a>, <a href="../shell/wrap.html">wrap</a>, <a href="../shell/unwrap.html">unwrap</a>, <a href="../shell/group.html">group</a>, <a href="../shell/ungroup.html">ungroup</a>, <a href="../shell/summarize.html">summarize</a>, <a href="../shell/rank.html">rank</a></p>



<div class="subentry">Experimental operators</div>
<p class="ops"><a href="../shell/quota.html">quota</a></p>



<div class="subentry">Non-relational operators</div>
<p class="ops"><a href="../shell/autonum.html">autonum</a>, <a href="../shell/defaults.html">defaults</a>, <a href="../shell/compact.html">compact</a>, <a href="../shell/sort.html">sort</a>, <a href="../shell/clip.html">clip</a>, <a href="../shell/coerce.html">coerce</a></p>



<div class="subentry">Other commands</div>
<p class="ops"><a href="../shell/exec.html">exec</a>, <a href="../shell/help.html">help</a>, <a href="../shell/show.html">show</a></p>





<div class="entry">Alf in Ruby</div>
...under construction...



</div>



<div id="page">
<h2>One proposal, three flavors</h2>

<p>As I explain <a href="/overview/where-does-alf-come-from.html">here</a>, I've started Alf because I wanted to split the effective execution of benchmarks from the summarization and displaying of their results. It has been written with a strong background about relational theory, so that it ends up being actually a proposal of query language plus an implementation supporting three syntactic flavors.</p>

<h3>Overview</h3>

<p>Our query language proposal is not about the semantics of relational algebra, which is borrowed from <a href="http://thethirdmanifesto.com/">The Third Manifesto and TUTORIAL D</a>. Instead, it is about syntactic issues and a few suggestions for using relational algebra in dynamic languages like python, ruby, clojure, javascript and the like. We call the latter the &quot;hosting language&quot; below. Specifically, we propose</p>

<ul>
<li>a list of <em>named relational operators</em> together with their <em>signature</em> in terms of <em>operands</em>, <em>arguments</em> and <em>options</em></li>
<li>a specification of the <em>types</em> of arguments and options</li>
</ul>

<p>Note that, this is neither purely semantic nor purely syntactic and should be seen as a definition of an abstract Domain Specific Language (DSL) [1, 2]. Alf provides three syntactic flavors of this DSL (one for expressing queries in shell, two others for expressing queries in Ruby) and an execution engine. Note that,</p>

<ul>
<li>as such, the query language <strong>says nothing about how</strong> queries are executed. Alf's engine is a pragmatic reference implementation that tries not to load whole relations in memory, where possible [3].</li>
<li>the boundaries of the proposed query language are intentionally limited to avoid perturbating the hosting language with concepts that would make it impossible to implement [4].</li>
<li>in particular, it does not prescribe a predefined set of supported scalar types and operators. Most hosting languages support Boolean, Integer or String, etc. and provides users with ways for implementing new ones.</li>
</ul>

<h3>Basic types</h3>

<p>This section describes the basic types used in query expressions. The proposal <strong>does not prescribe any dedicated syntax for literals</strong>, that must be made clear by each DSL implementation. Examples below are valid literals when using the functional Ruby DSL of Alf. </p>

<h4>Name</h4>

<p>A name is used to denote base relations, attributes and types. When relevant, the context distinguish between attribute names, relation names and type names. Examples are:</p>

<pre class="theory"><code class="ruby">:suppliers, :parts             # relation names
:name, :city, :color_in_rgb    # attribute names
String, Float, Color           # type names
</code></pre>

<h4>Attribute list</h4>

<p>An attribute list is simply a list of attribute <em>names</em>. Such a list has a left-to-right ordering which may or may not be relevant in the context of its use. Generally, duplicates in attributes lists does not make sense. Examples of attribute lists are:</p>

<pre class="theory"><code class="ruby">[]                      # the empty list
[:name]                 # the singleton list
[:name, :city, :color]  # general case
</code></pre>

<h4>Renaming</h4>

<p>A renaming is a mapping between attribute names and other attribute names (a partial function, in fact). Examples of renaming are:</p>

<pre class="theory"><code class="ruby">{}                                                  # the empty renaming
{:name => :supplier_name}                           # a singleton renaming
{:name => :supplier_name, :color => :color_in_rgb}  # a more general case
</code></pre>

<h4>Heading</h4>

<p>A heading is a mapping between attribute names and type names (a partial function, in fact). Examples of headings are:</p>

<pre class="theory"><code class="ruby">{}                                  # the empty heading
{:name => String}                   # a singleton heading
{:name => String, :color => Color}  # a more general case
</code></pre>

<h4>Order direction and Ordering</h4>

<p>An order direction is simply ascending or descending. In the ruby DSL:</p>

<pre class="theory"><code class="ruby">:asc, :desc</code></pre>

<p>An ordering is a ordered mapping between attribute names and order directions. To stress the fact that an ordering is itself <em>ordered</em> (unlike a heading or a renaming), the idiomatic way of expressing orderings in the ruby DSL is as follows: </p>

<p>... under construction ...</p>

<h3>References and footnotes</h3>

<ol>
<li>Arie van Deursen, Paul Klint, and Joost Visser. <em>Domain-specific languages: an annotated bibliography</em>. ACM SIGPLAN Vol 35., pages 26-36, June 2000.</li>
<li>Martin Fowler, <em>Domain Specific Languages</em>, Addison-Wesley Professional, 1st edition, 2010.</li>
<li>You are absolutely free to implement it on distributed cloud architectures involving NoSQL and map/reduce technologies if it makes sense.</li>
<li>Therefore, it is <strong>not an attempt to standardize</strong> a query language but rather the pragmatic suggestion of &quot;using similar names and structure for similar concepts in different contexts&quot;, hence the DSL approach.</li>
</ol>

</div>


<div id="links">
<a href="http://github.com/blambeau/alf" target="_blank"><img src="../images/github-128.png"/></a> 
<a href="http://twitter.com/blambeau" target="_blank"><img src="../images/twitter-128.png"/></a> 
</div>
<div id="social">
<a href="http://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="blambeau">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
</div>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-16520635-5']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</body>

